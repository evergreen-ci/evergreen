{
  "versions": [
    {
      "_id": "evergreen_5e823e1f28baeaa22ae00823d83e03082cd148ab",
      "gitspec": "5e823e1f28baeaa22ae00823d83e03082cd148ab",
      "identifier": "evergreen",
      "r": "gitter_request"
    }
  ],
  "tasks": [
    { "_id": "1", "version": "5e4ff3abe3c3317e352062e4" },
    { "_id": "2", "version": "5e4ff3abe3c3317e352062e4" },
    { "_id": "3", "version": "5e4ff3abe3c3317e352062e4" },
    { "_id": "4", "version": "5e4ff3abe3c3317e352062e4" },
    { "_id": "5", "version": "5e4ff3abe3c3317e352062e4" },
    { "_id": "6", "version": "5e4ff3abe3c3317e352062e4" }
  ],
  "patches": [
    {
      "_id": { "$oid": "5e4ff3abe3c3317e352062e4" },
      "branch": "evergreen",
      "version": "5e4ff3abe3c3317e352062e4",
      "activated": true,
      "githash": "5e823e1f28baeaa22ae00823d83e03082cd148ab",
      "patches": [
        {
          "name": "",
          "githash": "5e823e1f28baeaa22ae00823d83e03082cd148ab",
          "patch_set": {
            "patch_file_id": "5e4ff3ab850e6136624eaf95_5e823e1f28baeaa22ae00823d83e03082cd148ab",
            "summary": [
              {
                "filename": "service/api_task.go",
                "additions": 5,
                "deletions": 4
              }
            ]
          },
          "message": ""
        },
        {
          "name": "Spruce",
          "githash": "5e823e1s28baeaa22ae00823d83e03082cd148ab",
          "patch_set": {
            "patch_file_id": "5e4ff3ab85026136624eaf95_5e823e1f28baeaa22ae00823d83e03082cd148ab",
            "summary": [
              {
                "filename": "src/page/Task.tsx",
                "additions": 11,
                "deletions": 4
              },
              {
                "filename": "src/App.tsx",
                "additions": 22,
                "deletions": 4
              },
              {
                "filename": "src/page/Patch.tsx",
                "additions": 33,
                "deletions": 4
              }
            ]
          },
          "message": ""
        }
      ]
    },
    {
      "_id": { "$oid": "5e94c8213e8e8651bee37561" },
      "desc": "'evergreen-ci/spruce' pull request #132 by tgrander: EVG-7795: (patch) change patch success status to `succeeded` (https://github.com/evergreen-ci/spruce/pull/132)",
      "branch": "spruce",
      "githash": "6cf2ca4c009f93285cf986b6de0100c1cbe54092",
      "patch_number": 561,
      "author": "trey.granderson",
      "version": "",
      "status": "unscheduled",
      "create_time": { "$date": "2020-04-13T20:12:39Z" },
      "start_time": null,
      "finish_time": null,
      "build_variants": ["ubuntu1604"],
      "tasks": ["coverage", "e2e_test", "compile", "test", "lint"],
      "variants_tasks": [
        {
          "variant": "ubuntu1604",
          "tasks": ["coverage", "e2e_test", "compile", "test", "lint"],
          "displaytasks": []
        }
      ],
      "patches": [
        {
          "name": "",
          "githash": "6cf2ca4c009f93285cf986b6de0100c1cbe54092",
          "patch_set": {
            "patch_file_id": "5e94c8213627e064b90a2717_6cf2ca4c009f93285cf986b6de0100c1cbe54092",
            "summary": [
              {
                "filename": "src/gql/queries/get-patch-tasks.ts",
                "additions": 1,
                "deletions": 1
              }
            ]
          },
          "message": ""
        }
      ],
      "activated": false,
      "patched_config": "stepback: true\ncommand_type: test\nignore:\n  - \"*.md\"\n  - \".github/*\"\n\nmodules:\n- name: evergreen\n  repo: git@github.com:evergreen-ci/evergreen.git\n  branch: master\n  prefix: gopath/src/github.com/evergreen-ci\n\n#######################################\n#              Functions              #\n#######################################\nfunctions:\n  get-project:\n    command: git.get_project\n    type: setup\n    params:\n      directory: spruce\n\n  get-evergreen-project:\n    command: git.get_project\n    type: setup\n    params:\n      directory: spruce\n      revisions:\n        evergreen: ${evergreen_rev}\n\n  setup-mongodb:\n    - command: subprocess.exec\n      type: setup\n      params:\n        env:\n          gobin: /opt/golang/go1.9/bin/go\n          MONGODB_URL: ${mongodb_url}\n          DECOMPRESS: ${decompress}\n        working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n        command: make get-mongodb\n    - command: subprocess.exec\n      type: setup\n      params:\n        background: true\n        working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n        command: make start-mongod\n    - command: subprocess.exec\n      type: setup\n      params:\n        working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n        command: make check-mongod\n    - command: subprocess.exec\n      type: setup\n      params:\n        working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n        command: make init-rs\n\n  run-make:\n    command: subprocess.exec\n    params:\n      working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n      binary: make\n      args: [\"${make_args|}\", \"${target}\"]\n      background: false\n      env:\n        GOPATH: ${workdir}/spruce/gopath\n        GO_BIN_PATH: /opt/golang/go1.13/bin/go\n        GOROOT: /opt/golang/go1.13\n\n  run-make-background:\n    command: subprocess.exec\n    params:\n      working_dir: spruce/gopath/src/github.com/evergreen-ci/evergreen\n      binary: make\n      args: [\"${make_args|}\", \"${target}\"]\n      background: true\n      env:\n        GOPATH: ${workdir}/spruce/gopath\n        GO_BIN_PATH: /opt/golang/go1.13/bin/go\n        GOROOT: /opt/golang/go1.13\n\n  npm-start:\n    command: subprocess.exec\n    type: setup\n    params:\n      working_dir: spruce\n      background: true\n      command: npm run dev\n\n  npm-install:\n    command: shell.exec\n    params:\n      working_dir: spruce\n      script: |\n        npm install\n\n  npm-test:\n    command: subprocess.exec\n    params:\n      working_dir: spruce\n      binary: npm\n      args: [test, --, -u, --reporters=default, --reporters=jest-junit]\n      env:\n        CI: \"true\"\n\n  npm-lint:\n    command: subprocess.exec\n    params:\n      working_dir: spruce\n      binary: npm\n      args: [run, lint]\n\n  npm-build:\n    command: subprocess.exec\n    params:\n      working_dir: spruce\n      binary: npm\n      args: [run, build]\n\n  npm-build:\n    command: subprocess.exec\n    params:\n      working_dir: spruce\n      binary: npm\n      args: [run, build]\n\n  npm-coverage:\n    command: subprocess.exec\n    params:\n      working_dir: spruce\n      binary: npm\n      args: [run, coverage]\n\n  run-cypress-tests:\n    command: shell.exec\n    params:\n      working_dir: spruce\n      script: |\n        npx wait-on http://localhost:3000\n        npx cypress run --record --key ${cypress_record_key} --reporter junit\n\n  copy-cmdrc:\n    command: shell.exec\n    params:\n      working_dir: spruce\n      script: |\n        cp config/.cmdrc_sample.json config/.cmdrc.json \n\n  attach-results: \n    command: attach.xunit_results\n    params:\n      files:\n        - \"./spruce/junit.xml\"\n\n  attach-cypress-screenshots:\n    command: s3.put\n    type: system\n    params:\n      aws_key: ${aws_key}\n      aws_secret: ${aws_secret}\n      local_files_include_filter:\n        [\"spruce/cypress/screenshots/*\"]\n      remote_file: spruce/${task_id}/\n      bucket: mciuploads\n      content_type: image/png\n      permissions: public-read\n      display_name: \"screenshot:\"\n\n  attach-cypress-videos:\n    command: s3.put\n    type: system\n    params:\n      aws_key: ${aws_key}\n      aws_secret: ${aws_secret}\n      local_files_include_filter:\n        [\"spruce/cypress/videos/*\"]\n      remote_file: spruce/${task_id}/\n      bucket: mciuploads\n      content_type: video/mp4\n      permissions: public-read\n      display_name: \"video:\"\n\n  attach-server-logs:\n    command: s3.put\n    type: system\n    params:\n      aws_key: ${aws_key}\n      aws_secret: ${aws_secret}\n      local_files_include_filter:\n        [\"gopath/src/github.com/evergreen-ci/evergreen/server_logs.txt\"]\n      remote_file: spruce/${task_id}/\n      bucket: mciuploads\n      content_type: text/plain\n      permissions: public-read\n      display_name: \"server logs\"\n\n#######################################\n#                Tasks                #\n#######################################\n\ntasks:\n  - name: compile\n    commands:\n    - func: get-project\n    - func: npm-install\n    - func: npm-build\n    - func: npm-build\n\n  - name: test\n    commands:\n    - func: get-project\n    - func: npm-install\n    - func: npm-test\n\n  - name: lint\n    commands:\n    - func: get-project\n    - func: npm-install\n    - func: npm-lint\n\n  - name: coverage\n    commands:\n    - func: get-project\n    - func: npm-install\n    - func: npm-coverage\n\n  - name: e2e_test\n    commands:\n    - func: get-evergreen-project\n    - func: setup-mongodb\n    - func: copy-cmdrc\n    - func: run-make-background\n      vars:\n        target: local-evergreen\n    - func: npm-install\n    - func: npm-start\n    - func: run-cypress-tests\n\nbuildvariants:\n  - name: ubuntu1604\n    display_name: Ubuntu 16.04\n    run_on:\n    - ubuntu1604-test\n    modules:\n      - evergreen\n    tasks:\n    - name: compile\n    - name: test\n    - name: lint\n    - name: coverage\n    - name: e2e_test\n\npost:\n  - func: attach-results\n  - func: attach-cypress-screenshots\n  - func: attach-cypress-videos\n  - func: attach-server-logs",
      "alias": "__github",
      "github_patch_data": {
        "pr_number": 132,
        "base_owner": "evergreen-ci",
        "base_repo": "spruce",
        "base_branch": "new-ui-feature-branch",
        "head_owner": "tgrander",
        "head_repo": "spruce",
        "head_hash": "a5cb0f22707fb76b735121729d261cfa327f3750",
        "author": "tgrander",
        "author_uid": 15262143,
        "merge_commit_sha": ""
      }
    }
  ]
}
