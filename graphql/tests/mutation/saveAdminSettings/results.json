{
  "tests": [
    {
      "query_file": "announcements.graphql",
      "result": {
        "data": {
          "saveAdminSettings": {
            "banner": "New Banner",
            "bannerTheme": "ANNOUNCEMENT"
          }
        }
      }
    },
    {
      "query_file": "service_flags.graphql",
      "result": {
        "data": {
          "saveAdminSettings": {
            "serviceFlags": {
              "adminParameterStoreDisabled": true,
              "agentStartDisabled": true,
              "alertsDisabled": true,
              "backgroundReauthDisabled": true,
              "backgroundStatsDisabled": true,
              "cacheStatsEndpointDisabled": true,
              "cacheStatsJobDisabled": true,
              "checkBlockedTasksDisabled": true,
              "cliUpdatesDisabled": true,
              "cloudCleanupDisabled": true,
              "degradedModeDisabled": true,
              "elasticIPsDisabled": true,
              "emailNotificationsDisabled": true,
              "eventProcessingDisabled": true,
              "githubPRTestingDisabled": true,
              "githubStatusAPIDisabled": true,
              "hostAllocatorDisabled": true,
              "hostInitDisabled": true,
              "jiraNotificationsDisabled": true,
              "jwtTokenForCLIDisabled": true,
              "largeParserProjectsDisabled": true,
              "monitorDisabled": true,
              "podAllocatorDisabled": true,
              "podInitDisabled": true,
              "releaseModeDisabled": true,
              "repotrackerDisabled": true,
              "schedulerDisabled": true,
              "slackNotificationsDisabled": true,
              "sleepScheduleDisabled": true,
              "staticAPIKeysDisabled": true,
              "systemFailedTaskRestartDisabled": true,
              "taskDispatchDisabled": true,
              "taskLoggingDisabled": true,
              "taskReliabilityDisabled": true,
              "unrecognizedPodCleanupDisabled": true,
              "webhookNotificationsDisabled": true
            }
          }
        }
      }
    },
    {
      "query_file": "runners.graphql",
      "result": {
        "data": {
          "saveAdminSettings": {
            "notify": {
              "ses": {
                "senderAddress": "my-email"
              }
            },
            "hostInit": {
              "cloudStatusBatchSize": 1,
              "hostThrottle": 1,
              "maxTotalDynamicHosts": 1,
              "provisioningThrottle": 1
            },
            "taskLimits": {
              "maxConcurrentLargeParserProjectTasks": 1,
              "maxDailyAutomaticRestarts": 1,
              "maxDegradedModeConcurrentLargeParserProjectTasks": 1,
              "maxDegradedModeParserProjectSize": 1,
              "maxExecTimeoutSecs": 1,
              "maxGenerateTaskJSONSize": 1,
              "maxHourlyPatchTasks": 1,
              "maxIncludesPerVersion": 1,
              "maxParserProjectSize": 1,
              "maxPendingGeneratedTasks": 1,
              "maxTaskExecution": 1,
              "maxTasksPerVersion": 1
            },
            "repotracker": {
              "maxConcurrentRequests": 1,
              "maxRepoRevisionsToSearch": 1,
              "numNewRepoRevisionsToFetch": 1
            },
            "podLifecycle": {
              "maxParallelPodRequests": 1,
              "maxPodDefinitionCleanupRate": 1,
              "maxSecretCleanupRate": 1
            },
            "scheduler": {
              "acceptableHostIdleTimeSeconds": 1,
              "cacheDurationSeconds": 1,
              "commitQueueFactor": 1,
              "expectedRuntimeFactor": 1,
              "futureHostFraction": 0.1,
              "generateTaskFactor": 1,
              "groupVersions": false,
              "hostAllocator": "UTILIZATION",
              "hostAllocatorFeedbackRule": "WAITS_OVER_THRESH",
              "hostAllocatorRoundingRule": "UP",
              "hostsOverallocatedRule": "TERMINATE",
              "mainlineTimeInQueueFactor": 1,
              "numDependentsFactor": 1,
              "patchFactor": 1,
              "patchTimeInQueueFactor": 1,
              "stepbackTaskFactor": 1,
              "targetTimeSeconds": 1,
              "taskFinder": "PARALLEL"
            }
          }
        }
      }
    },
    {
      "query_file": "no_permissions.graphql",
      "test_user_id": "regular_user",
      "result": {
        "data": null,
        "errors": [
          {
            "message": "User 'regular_user' lacks required admin permissions",
            "path": ["saveAdminSettings"],
            "extensions": {
              "code": "FORBIDDEN"
            }
          }
        ]
      }
    },
    {
      "query_file": "external_communications.graphql",
      "result": {
        "data": {
          "saveAdminSettings": {
            "jira": {
              "email": "jira@example.com",
              "host": "https://jira.exampleChanged.com"
            },
            "slack": {
              "options": {
                "channel": "#general",
                "hostname": "slack.example.com",
                "name": "EvergreenBot",
                "username": "evergreen",
                "basicMetadata": true,
                "fields": true,
                "allFields": true,
                "fieldsSet": {
                  "field1": true,
                  "field2": false
                }
              },
              "token": "slackToken",
              "level": "Emergency",
              "name": "Slack Notifications"
            },
            "splunk": {
              "splunkConnectionInfo": {
                "serverurl": "https://splunk.example.com",
                "token": "SplunkToken",
                "channel": "#splunk-channel"
              }
            },
            "runtimeEnvironments": {
              "baseurl": "https://runtime.example.com",
              "apiKey": "newApiKey"
            },
            "testSelection": {
              "url": "https://test-selection.example.com"
            }
          }
        }
      }
    }
  ]
}
